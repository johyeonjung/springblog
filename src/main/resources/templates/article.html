<!DOCTYPE html>
<html xmlns:th="http://www.thymeleaf.org">
<head>
    <meta charset="UTF-8">
    <title th:text="${article.title}">게시글 상세</title>
    <link rel="stylesheet" th:href="@{/css/style.css}"/>
</head>
<body>

<!-- 글 상세 정보 -->
<section>
    <h1 th:text="${article.title}">제목</h1>
    <h1 th:text="${article.title}">태그</h1>
    <p th:text="${article.content}">내용</p>
    <p>
        작성자: <span th:text="${article.authorName}">작성자명</span> |
        작성일: <span th:text="${#temporals.format(article.createdAt, 'yyyy-MM-dd HH:mm')}">작성일</span>
    </p>
</section>

<button type="button" id="modify-btn"
        th:onclick="|location.href='@{/new-article?id={articleId}(articleId=${article.id})}'|"
        class="btn btn-primary btn-sm">수정</button>
<button type="button" id="delete-btn"
        class="btn btn-secondary btn-sm">삭제</button>

<hr/>

<!-- 댓글 목록 -->
<section>
    <h3>댓글</h3>
    <div id="comments">
        <div th:if="${#lists.isEmpty(comments)}">
            <p>아직 댓글이 없습니다.</p>
        </div>
        <div th:each="comment : ${comments}">
            <p>
                <strong th:text="${comment.authorName}">작성자</strong> :
                <span th:text="${comment.content}">내용</span>
                <small th:text="${#temporals.format(comment.createdAt, 'yyyy-MM-dd HH:mm')}"></small>
            </p>
            <!-- 댓글 수정 -->
            <form th:action="@{|/articles/${article.id}/comments/${comment.id}/edit|}" method="post">
                <input type="text" name="content" placeholder="수정할 내용"/>
                <button type="submit">수정</button>
            </form>
            <!-- 댓글 삭제 -->
            <form th:action="@{|/articles/${article.id}/comments/${comment.id}/delete|}" method="post">
                <button type="submit">삭제</button>
            </form>
        </div>
    </div>
</section>

<hr/>

<!-- 댓글 작성 폼 -->
<section>
    <form th:action="@{|/articles/${article.id}/comments|}" method="post">
        <input type="text" name="content" placeholder="댓글을 입력하세요"/>
        <button type="submit">등록</button>
    </form>
</section>

<hr/>

<!-- 글 목록으로 돌아가기 -->
<section>
    <a th:href="@{/articles}">목록으로</a>
</section>

</body>
</html>
